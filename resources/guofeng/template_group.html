<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>群聊分析报告</title>
    <link rel="stylesheet" href="./css/template_group.css" />
</head>

<body class="${theme}-theme">

    <!-- Main Window -->
    <div class="game-window">
        <!-- Decorations -->
        <div class="corner-decoration top-left"></div>
        <div class="corner-decoration bottom-right"></div>
        <div class="bg-pattern"></div>
        <div class="seal-mark">群报</div>

        <!-- Header -->
        <div class="hud-header">
            <div class="game-title">
                <h1>群聊风云录</h1>
                <div class="subtitle">GROUP CHRONICLE</div>
            </div>
            <div class="hud-date-box">
                <div class="hud-date">${analysisDate}</div>
                <div class="hud-location">${groupName}</div>
            </div>
        </div>

        <!-- Content -->
        <div class="scroll-content">

            <!-- Stats -->
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-label">总消息数</div>
                    <div class="status-value">${totalMessages}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">参与人数</div>
                    <div class="status-value">${totalParticipants}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">总字数</div>
                    <div class="status-value">${totalChars}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">活跃时段</div>
                    <div class="status-value">${mostActivePeriod}</div>
                </div>
            </div>

            <!-- Leaderboard -->
            <div class="section-header">
                <span class="section-icon">龙</span>
                <h2>龙王榜 // LEADERBOARD</h2>
            </div>
            <div class="grid-2-col">
                ${userStats}
            </div>

            <!-- Titles -->
            <div class="section-header">
                <span class="section-icon">号</span>
                <h2>群友称号 // TITLES</h2>
            </div>
            <div class="grid-2-col">
                ${userTitles}
            </div>

            <!-- Topics -->
            <div class="section-header">
                <span class="section-icon">谈</span>
                <h2>热门话题 // TOPICS</h2>
            </div>
            <div>
                ${topics}
            </div>

            <!-- Quotes -->
            <div class="section-header">
                <span class="section-icon">言</span>
                <h2>本群圣经 // QUOTES</h2>
            </div>
            <div>
                ${goldenQuotes}
            </div>

            <!-- Chart -->
            <div class="section-header">
                <span class="section-icon">势</span>
                <h2>活跃分布 // ACTIVITY</h2>
            </div>
            ${activeHoursChart}

            <div class="game-footer">
                Generated by ChatLuna
            </div>
        </div>
    </div>

    <script>
        const body = document.body;
        if (!body.className.includes('theme')) {
            const hour = new Date().getHours();
            body.classList.add(hour >= 19 || hour < 6 ? 'dark-theme' : 'light-theme');
        }
    </script>
</body>

</html>