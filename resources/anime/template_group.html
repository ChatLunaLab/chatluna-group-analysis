<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¾¤èŠåˆ†ææŠ¥å‘Š</title>
    <link rel="stylesheet" href="./css/template_group.css" />
</head>
<body class="${theme}-theme">

    <!-- Main Game Window Container -->
    <div class="game-window">
        
        <!-- HUD Header -->
        <div class="hud-header">
            <div class="game-title">
                <h1>ç¾¤èŠåˆ†ææŠ¥å‘Š</h1>
                <div class="subtitle">GROUP ANALYSIS RECORD</div>
            </div>
            <div class="hud-date-box">
                <div class="hud-date">${analysisDate}</div>
                <div class="hud-location">${groupName}</div>
            </div>
        </div>

        <!-- Content Scroll Area -->
        <div class="scroll-content">
            
            <!-- Stats Status Grid -->
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-label">æ€»æ¶ˆæ¯æ•°</div>
                    <div class="status-value">${totalMessages}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">å‚ä¸äººæ•°</div>
                    <div class="status-value">${totalParticipants}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">æ€»å­—æ•°</div>
                    <div class="status-value">${totalChars}</div>
                </div>
                <div class="status-item">
                    <div class="status-label">æ´»è·ƒæ—¶æ®µ</div>
                    <div class="status-value">${mostActivePeriod}</div>
                </div>
            </div>

            <!-- Dragon King Leaderboard -->
            <div class="section-header">
                <span class="section-icon">â™›</span>
                <h2>é¾™ç‹æ¦œ // LEADERBOARD</h2>
            </div>
            <div class="grid-2-col">
                ${userStats}
            </div>

            <!-- Titles -->
            <div class="section-header">
                <span class="section-icon">â˜…</span>
                <h2>ç¾¤å‹ç§°å· // TITLES</h2>
            </div>
            <div class="grid-2-col">
                ${userTitles}
            </div>

            <!-- Topics -->
            <div class="section-header">
                <span class="section-icon">ğŸ’¬</span>
                <h2>çƒ­é—¨è¯é¢˜ // TOPICS</h2>
            </div>
            <div>
                ${topics}
            </div>

            <!-- Quotes -->
            <div class="section-header">
                <span class="section-icon">â</span>
                <h2>æœ¬ç¾¤åœ£ç» // QUOTES</h2>
            </div>
            <div>
                ${goldenQuotes}
            </div>

            <!-- Chart -->
            <div class="section-header">
                <span class="section-icon">ğŸ“Š</span>
                <h2>æ´»è·ƒåˆ†å¸ƒ // ACTIVITY</h2>
            </div>
            ${activeHoursChart}

            <div class="game-footer">
                Generated by ChatLuna | System Ver. 1.0
            </div>
        </div>
    </div>

    <script>
        // Helper script to ensure theme is applied if variable missing
        const body = document.body;
        if (!body.className.includes('theme')) {
            const hour = new Date().getHours();
            body.classList.add(hour >= 19 || hour < 6 ? 'dark-theme' : 'light-theme');
        }
    </script>
</body>
</html>