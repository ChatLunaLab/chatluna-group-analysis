<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>群聊日报</title>
    <link rel="stylesheet" href="./css/template_group.css">
</head>

<body>
    <div class="paper-container">
        <!-- Masthead -->
        <header class="newspaper-header">
            <div class="header-top-meta">
                <span class="meta-item">No. 114514</span>
                <span class="meta-item">${analysisDate}</span>
                <span class="meta-item">今日免费</span>
            </div>
            <h1 class="newspaper-title">群聊日报</h1>
            <div class="header-sub">
                <span class="sub-text">GROUP CHAT DAILY · ${groupName} 专刊</span>
            </div>
        </header>

        <div class="newspaper-content">
            <!-- Row 1: Headlines -->
            <section class="section-headlines">
                <div class="section-label"><span>头版头条 / HEADLINES</span></div>
                <div class="headlines-grid">
                    ${topics}
                </div>
            </section>

            <!-- Row 2: Golden Quotes -->
            <section class="section-quotes-wide">
                <div class="section-label"><span>每日金句 / QUOTES OF THE DAY</span></div>
                <div class="quotes-grid">
                    ${goldenQuotes}
                </div>
            </section>

            <!-- Row 3: Titles (Horizontal) -->
            <section class="section-titles-wide">
                <div class="section-label"><span>群友称号 / TITLES</span></div>
                <div class="titles-list-wide">
                    ${userTitles}
                </div>
            </section>

            <!-- Row 4: Split View (People | Sidebar) -->
            <div class="main-columns">
                <!-- Left Column: People -->
                <section class="column-main">
                    <div class="section-label"><span>风云人物 / PEOPLE</span></div>
                    <div class="people-list">
                        ${userStats}
                    </div>
                </section>

                <!-- Right Column: Sidebar -->
                <aside class="column-sidebar">
                    <div class="paper-box stats-box">
                        <h3 class="box-title">数据概览</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">消息总数</span>
                                <span class="stat-value">${totalMessages}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">参与人数</span>
                                <span class="stat-value">${totalParticipants}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">总字数</span>
                                <span class="stat-value">${totalChars}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">最活跃</span>
                                <span class="stat-value">${mostActivePeriod}</span>
                            </div>
                        </div>
                    </div>

                    <div class="paper-box chart-box">
                        <h3 class="box-title">活跃走势</h3>
                        ${activeHoursChart}
                    </div>

                    <div class="paper-box ad-box">
                        <h3 class="box-title">本群公告</h3>
                        <div class="ad-content">
                            <p>诚招龙王</p>
                            <p>有意者请在群内疯狂发言</p>
                            <p>ChatLuna 竭诚为您服务</p>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <footer class="newspaper-footer">
            <div class="footer-line"></div>
            <p>ChatLuna Group Analysis System · Generated by ChatLuna</p>
        </footer>
    </div>
    <script>
        const themeSetting = '${theme}';
        const body = document.body;

        function applyTheme(themeName) {
            if (themeName === 'dark') {
                body.classList.add('dark-theme');
            } else {
                body.classList.remove('dark-theme');
            }
        }

        function init() {
            if (themeSetting === 'auto') {
                const hour = new Date().getHours();
                const theme = hour >= 19 || hour < 6 ? 'dark' : 'light';
                applyTheme(theme);
            } else {
                applyTheme(themeSetting);
            }
        }

        init();
    </script>
</body>

</html>